<!DOCTYPE html>

<html lang="fr" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Welcome to ocr-p13-lettings’s documentation! &#8212; Documentation ocr-p13-lettings 1</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=4f649999" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=039e1c02" />
    <script src="_static/documentation_options.js?v=a12a2fe1"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/translations.js?v=d99ca74e"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Recherche" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="welcome-to-ocr-p13-lettings-s-documentation">
<h1><a class="toc-backref" href="#id1" role="doc-backlink">Welcome to ocr-p13-lettings’s documentation!</a><a class="headerlink" href="#welcome-to-ocr-p13-lettings-s-documentation" title="Link to this heading">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
</section>
<section id="indices-and-tables">
<h1><a class="toc-backref" href="#id2" role="doc-backlink">Indices and tables</a><a class="headerlink" href="#indices-and-tables" title="Link to this heading">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Index du module</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Page de recherche</span></a></p></li>
</ul>
</section>
<section id="guide-de-developpement-local-pour-orange-county-lettings">
<h1><a class="toc-backref" href="#id3" role="doc-backlink">Guide de Développement Local pour Orange County Lettings</a><a class="headerlink" href="#guide-de-developpement-local-pour-orange-county-lettings" title="Link to this heading">¶</a></h1>
<nav class="contents" id="table-des-matieres">
<p class="topic-title">Table des matières</p>
<ul class="simple">
<li><p><a class="reference internal" href="#welcome-to-ocr-p13-lettings-s-documentation" id="id1">Welcome to ocr-p13-lettings’s documentation!</a></p></li>
<li><p><a class="reference internal" href="#indices-and-tables" id="id2">Indices and tables</a></p></li>
<li><p><a class="reference internal" href="#guide-de-developpement-local-pour-orange-county-lettings" id="id3">Guide de Développement Local pour Orange County Lettings</a></p></li>
<li><p><a class="reference internal" href="#resume" id="id4">Résumé</a></p></li>
<li><p><a class="reference internal" href="#developpement-local" id="id5">Développement local</a></p>
<ul>
<li><p><a class="reference internal" href="#prerequis" id="id6">Prérequis</a></p></li>
<li><p><a class="reference internal" href="#macos-linux" id="id7">macOS / Linux</a></p>
<ul>
<li><p><a class="reference internal" href="#cloner-le-depot" id="id8">Cloner le dépôt</a></p></li>
<li><p><a class="reference internal" href="#creer-l-environnement-virtuel" id="id9">Créer l’environnement virtuel</a></p></li>
<li><p><a class="reference internal" href="#activer-l-environnement" id="id10">Activer l’environnement</a></p></li>
<li><p><a class="reference internal" href="#confirmer-les-versions-de-python-et-pip" id="id11">Confirmer les versions de Python et Pip</a></p></li>
<li><p><a class="reference internal" href="#desactiver-l-environnement" id="id12">Désactiver l’environnement</a></p></li>
<li><p><a class="reference internal" href="#executer-le-site" id="id13">Exécuter le site</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#linting" id="id14">Linting</a></p></li>
<li><p><a class="reference internal" href="#tests-unitaires" id="id15">Tests unitaires</a></p></li>
<li><p><a class="reference internal" href="#base-de-donnees" id="id16">Base de données</a></p></li>
<li><p><a class="reference internal" href="#panel-d-administration" id="id17">Panel d’administration</a></p></li>
<li><p><a class="reference internal" href="#windows" id="id18">Windows</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#deploiement" id="id19">Déploiement</a></p></li>
</ul>
</nav>
</section>
<section id="resume">
<h1><a class="toc-backref" href="#id4" role="doc-backlink">Résumé</a><a class="headerlink" href="#resume" title="Link to this heading">¶</a></h1>
<p>Ce guide explique le processus de configuration et de développement local du site web Orange County Lettings.</p>
</section>
<section id="developpement-local">
<h1><a class="toc-backref" href="#id5" role="doc-backlink">Développement local</a><a class="headerlink" href="#developpement-local" title="Link to this heading">¶</a></h1>
<section id="prerequis">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Prérequis</a><a class="headerlink" href="#prerequis" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Compte GitHub avec accès en lecture à ce dépôt</p></li>
<li><p>Git CLI</p></li>
<li><p>SQLite3 CLI</p></li>
<li><p>Interpréteur Python, version 3.6 ou supérieure</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Dans la suite de la documentation sur le développement local, nous supposerons que la commande <code class="docutils literal notranslate"><span class="pre">python</span></code> de votre shell OS exécute l’interpréteur Python susmentionné, à moins qu’un environnement virtuel ne soit activé.</p>
</div>
</section>
<section id="macos-linux">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">macOS / Linux</a><a class="headerlink" href="#macos-linux" title="Link to this heading">¶</a></h2>
<section id="cloner-le-depot">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Cloner le dépôt</a><a class="headerlink" href="#cloner-le-depot" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/chemin/vers/projet/
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/tristan-mn/OPC_DA_P13_ORANGE_COUNTY_LETTINGS_DEVOPS.git
</pre></div>
</div>
</section>
<section id="creer-l-environnement-virtuel">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Créer l’environnement virtuel</a><a class="headerlink" href="#creer-l-environnement-virtuel" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/chemin/vers/Python-OC-Lettings-FR
python<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>venv
apt-get<span class="w"> </span>install<span class="w"> </span>python3-venv<span class="w"> </span><span class="o">(</span>Si<span class="w"> </span>des<span class="w"> </span>erreurs<span class="w"> </span>surviennent<span class="w"> </span>avec<span class="w"> </span>un<span class="w"> </span>paquet<span class="w"> </span>non<span class="w"> </span>trouvé<span class="w"> </span>sur<span class="w"> </span>Ubuntu<span class="o">)</span>
</pre></div>
</div>
</section>
<section id="activer-l-environnement">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Activer l’environnement</a><a class="headerlink" href="#activer-l-environnement" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span>venv/bin/activate
</pre></div>
</div>
</section>
<section id="confirmer-les-versions-de-python-et-pip">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">Confirmer les versions de Python et Pip</a><a class="headerlink" href="#confirmer-les-versions-de-python-et-pip" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>which<span class="w"> </span>python
python<span class="w"> </span>--version
which<span class="w"> </span>pip
</pre></div>
</div>
</section>
<section id="desactiver-l-environnement">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">Désactiver l’environnement</a><a class="headerlink" href="#desactiver-l-environnement" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>deactivate
</pre></div>
</div>
</section>
<section id="executer-le-site">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">Exécuter le site</a><a class="headerlink" href="#executer-le-site" title="Link to this heading">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/chemin/vers/Python-OC-Lettings-FR
<span class="nb">source</span><span class="w"> </span>venv/bin/activate
pip<span class="w"> </span>install<span class="w"> </span>--requirement<span class="w"> </span>requirements.txt
python<span class="w"> </span>manage.py<span class="w"> </span>runserver
</pre></div>
</div>
<ul class="simple">
<li><p>Ouvrez <a class="reference external" href="http://localhost:8000">http://localhost:8000</a> dans un navigateur pour vérifier que le site fonctionne correctement.</p></li>
</ul>
</section>
</section>
<section id="linting">
<h2><a class="toc-backref" href="#id14" role="doc-backlink">Linting</a><a class="headerlink" href="#linting" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Exécutez le linter flake8 :</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/chemin/vers/Python-OC-Lettings-FR
<span class="nb">source</span><span class="w"> </span>venv/bin/activate
flake8
</pre></div>
</div>
</section>
<section id="tests-unitaires">
<h2><a class="toc-backref" href="#id15" role="doc-backlink">Tests unitaires</a><a class="headerlink" href="#tests-unitaires" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Exécutez les tests unitaires avec pytest :</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/chemin/vers/Python-OC-Lettings-FR
<span class="nb">source</span><span class="w"> </span>venv/bin/activate
pytest
</pre></div>
</div>
</section>
<section id="base-de-donnees">
<h2><a class="toc-backref" href="#id16" role="doc-backlink">Base de données</a><a class="headerlink" href="#base-de-donnees" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Ouvrez une session shell SQLite3 :</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/chemin/vers/Python-OC-Lettings-FR
sqlite3
</pre></div>
</div>
<ul class="simple">
<li><p>Connectez-vous à la base de données :</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="k">open</span><span class="w"> </span><span class="n">oc</span><span class="o">-</span><span class="n">lettings</span><span class="o">-</span><span class="n">site</span><span class="p">.</span><span class="n">sqlite3</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Affichez les tables dans la base de données :</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="n">tables</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Affichez les colonnes dans le tableau des profils :</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">pragma</span><span class="w"> </span><span class="n">table_info</span><span class="p">(</span><span class="n">Python</span><span class="o">-</span><span class="n">OC</span><span class="o">-</span><span class="n">Lettings</span><span class="o">-</span><span class="n">FR_profile</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Exécutez une requête sur la table des profils (exemple avec un filtre sur la ville) :</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">select</span><span class="w"> </span><span class="n">user_id</span><span class="p">,</span><span class="w"> </span><span class="n">favorite_city</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">Python</span><span class="o">-</span><span class="n">OC</span><span class="o">-</span><span class="n">Lettings</span><span class="o">-</span><span class="n">FR_profile</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">favorite_city</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;B%&#39;</span><span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Pour quitter la session SQLite3 :</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="n">quit</span>
</pre></div>
</div>
</section>
<section id="panel-d-administration">
<h2><a class="toc-backref" href="#id17" role="doc-backlink">Panel d’administration</a><a class="headerlink" href="#panel-d-administration" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Accédez au panel d’administration en ouvrant <a class="reference external" href="http://localhost:8000/admin">http://localhost:8000/admin</a> dans un navigateur.</p></li>
<li><p>Connectez-vous avec l’utilisateur admin et le mot de passe Abc1234!</p></li>
</ul>
</section>
<section id="windows">
<h2><a class="toc-backref" href="#id18" role="doc-backlink">Windows</a><a class="headerlink" href="#windows" title="Link to this heading">¶</a></h2>
<p>L’utilisation de PowerShell est similaire à ce qui a été décrit précédemment, avec quelques différences :</p>
<ul class="simple">
<li><p>Pour activer l’environnement virtuel :</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>.<span class="se">\v</span>env<span class="se">\S</span>cripts<span class="se">\A</span>ctivate.ps1
</pre></div>
</div>
<ul class="simple">
<li><p>Remplacez <code class="docutils literal notranslate"><span class="pre">which</span> <span class="pre">&lt;ma-commande&gt;</span></code> par <code class="docutils literal notranslate"><span class="pre">(Get-Command</span> <span class="pre">&lt;ma-commande&gt;).Path</span></code></p></li>
</ul>
</section>
</section>
<section id="deploiement">
<h1><a class="toc-backref" href="#id19" role="doc-backlink">Déploiement</a><a class="headerlink" href="#deploiement" title="Link to this heading">¶</a></h1>
<p>Le déploiement nécessite :</p>
<ul class="simple">
<li><p>Compte CircleCi</p></li>
<li><p>Compte Docker</p></li>
<li><p>Compte Heroku</p></li>
<li><p>Compte Sentry</p></li>
</ul>
<p>Le déploiement est géré par le fichier <code class="docutils literal notranslate"><span class="pre">config.yml</span></code> présent dans le dossier <code class="docutils literal notranslate"><span class="pre">./.circleci</span></code>.
Ce fichier est déclenché lors d’un push vers le dépôt GitHub. Un push sur la branche <code class="docutils literal notranslate"><span class="pre">main</span></code> déclenche les tests pytest et flake8.
Ensuite, l’application est conteneurisée avec Docker et déployée en ligne via Heroku.</p>
<p>URL de l’application en ligne : <a class="reference external" href="https://lettings-2f52c82babb6.herokuapp.com/">https://lettings-2f52c82babb6.herokuapp.com/</a></p>
<p>Pour les pushes sur des branches autres que « main », seuls les tests pytest et flake8 sont réalisés.</p>
<p>Dans le dépôt CircleCi, configurez les variables d’environnement :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SECRET_KEY</span></code> : Clé secrète de l’application Django</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DOCKER_USER</span></code> : Votre identifiant DOCKERHUB</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DOCKER_PASS</span></code> : Votre mot de passe DOCKERHUB</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HEROKU_API_KEY</span></code> : Clé de l’application HEROKU</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HEROKU_APP_NAME</span></code> : Nom de l’application HEROKU</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SENTRY_KEY</span></code> pour l’utilisation de l’application SENTRY</p></li>
</ul>
<p>Dans le fichier <code class="docutils literal notranslate"><span class="pre">config.yml</span></code>, remplacez :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tristanmn/opc-p13-lettings</span></code> par le nom de votre dépôt DockerHub</p></li>
</ul>
<p>Dans le fichier <code class="docutils literal notranslate"><span class="pre">.env</span></code>, renseignez :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SECRET_KEY</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ALLOWED_HOST</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DEBUG</span></code> : 0 pour False, 1 pour True</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SENTRY_KEY</span></code> pour l’utilisation de l’application SENTRY</p></li>
</ul>
<p>L’URL suivante : <a class="reference external" href="https://lettings-2f52c82babb6.herokuapp.com/rezgrzgegter/">https://lettings-2f52c82babb6.herokuapp.com/rezgrzgegter/</a> génère une exception pour tester le suivi des problèmes sur Sentry.</p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="#">ocr-p13-lettings</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Recherche rapide</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, Tristan Montemitro.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>